# LimesAS lighttpd configuration file
#

server.modules              = (
            "mod_access",
            "mod_accesslog",
            "mod_rewrite",
            "mod_redirect",
            "mod_fastcgi",
            "mod_setenv",
            "mod_simple_vhost",
            "mod_alias",
 )

server.errorlog            = "/var/log/lighttpd/error.log"
accesslog.filename         = "/var/log/lighttpd/access.log"
url.access-deny            = ( "~", ".inc" )

server.port               = 980
server.pid-file            = "/var/run/lighttpd.pid"
dir-listing.encoding        = "utf-8"
server.dir-listing          = "disable"
server.username            = "www-data"
server.groupname           = "www-data"

server.document-root = "/var/www/LimesGUI"
ssl.engine = "enable"
ssl.pemfile = "/etc/lighttpd/standard.pem"


debug.log-file-not-found = "enable"


$SERVER["socket"] == ":980" {
    $HTTP["host"] =~ "" {
        server.document-root = "/var/www/LimesGUI"
        server.errorfile-prefix  = "/var/www/LimesGUI/root/static/error/"
        alias.url += ("/static/" => "/var/www/LimesGUI/root/static/")

        $HTTP["url"] !~ "^/(static/)" {
        fastcgi.server = (
            "" => (
                "limesgui" => (
                    "socket"       => "/tmp/limesgui.socket",
                    "check-local"  => "disable",
                    "bin-path"     => "/var/www/LimesGUI/script/limesgui_fastcgi.pl",
                    "min-procs"    => 1,
                    "max-procs"    => 1,
                    "idle-timeout" => 20
                )
            )
        )
        }

    }
}

include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl"

$SERVER["socket"] == ":981" {
        ssl.engine = "enable"
        ssl.pemfile = "/etc/lighttpd/standard.pem"
        server.document-root        = "/var/www/munin"
        index-file.names = ( "index.html" )
}
